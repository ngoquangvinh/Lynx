<UserControl x:Class="LynxUI_Main.Custom_Controls.MenuListControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:LynxUI_Main.Custom_Controls"
             x:Name="_menuList"
             Width="Auto" Height="Auto">

    <UserControl.Resources>

        <!-- DropShadow cho Indicator -->
        <DropShadowEffect x:Key="DropShadowInd" BlurRadius="10" ShadowDepth="3" Direction="360" Color="#f54a4a"/>

        <!-- Thanh Indicator đỏ bên trái -->
        <Style x:Key="IndicatorStyle" TargetType="Border">
            <Setter Property="Background" Value="#f54a4a"/>
            <Setter Property="Width" Value="4"/>
            <Setter Property="Visibility" Value="Hidden"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="Effect" Value="{StaticResource DropShadowInd}"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- Style chung cho Icon Path -->
        <Style x:Key="PathStyle" TargetType="Path">
            <Setter Property="Fill" Value="#686D83"/>
            <Setter Property="Stretch" Value="Uniform"/>
            <Setter Property="Width" Value="26"/>
            <Setter Property="Height" Value="26"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                    <Setter Property="Fill" Value="White"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                    <Setter Property="Fill" Value="White"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- ListBoxItem Style -->
        <Style TargetType="ListBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="74"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="IsSelected" Value="{Binding IsItemSelected, Mode=TwoWay}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" >
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="6"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Indicator -->
                                <Border x:Name="MenuIndicator" Grid.Column="0" Style="{StaticResource IndicatorStyle}"/>

                                <!-- Icon -->
                                <Viewbox Grid.Column="1" Height="26" Width="26" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <ItemsControl ItemsSource="{Binding Paths}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <Grid/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Path Data="{Binding Data}"
                                                      Fill="{Binding Fill}"
                                                      Stroke="{Binding Stroke}"
                                                      StrokeThickness="{Binding StrokeThickness}"
                                                      Stretch="Uniform"/>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </Viewbox>

                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ListBox Style -->
        <Style x:Key="ChatListBox" TargetType="ListBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="Focusable" Value="False"/>
        </Style>

        <!-- Settings Button Style (giống icon các menu) -->
        <Style x:Key="SettingsButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Width" Value="74"/>
            <Setter Property="Height" Value="74"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

    </UserControl.Resources>

    <!-- Main layout -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Menu List -->
        <ListBox x:Name="MenuList"
                 Grid.Row="0"
                 Style="{StaticResource ChatListBox}"
                 ItemsSource="{Binding ItemList}"
                 SelectionChanged="MenuList_SelectionChanged">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemContainerStyle>  
               <Style TargetType="ListBoxItem" BasedOn="{StaticResource {x:Type ListBoxItem}}">  
                   <EventSetter Event="MouseEnter" Handler="MenuItem_MouseEnter"/>  
                   <EventSetter Event="MouseLeave" Handler="MenuItem_MouseLeave"/>  
               </Style>  
            </ListBox.ItemContainerStyle>
        </ListBox>

        <!-- Settings Button dưới cùng -->
        <Border Grid.Row="1" Background="Transparent" Height="74" MouseEnter="Settings_MouseEnter" MouseLeave="Settings_MouseLeave" MouseLeftButtonUp="Settings_MouseClick">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="6"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Indicator đỏ cho Settings -->
                <Border x:Name="SettingsIndicator"
                Grid.Column="0"
                Background="#f54a4a"
                Width="4"
                Visibility="Collapsed"
                HorizontalAlignment="Left">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="3" Direction="360" Color="#f54a4a"/>
                    </Border.Effect>
                </Border>

                <!-- Icon Settings -->
                <Viewbox Grid.Column="1" Height="26" Width="26" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Path x:Name="SettingsIcon"
                  Data="M9.6679688,2L9.1757812,4.5234375C8.3550224,4.8338012,7.5961042,5.2674041,6.9296875,5.8144531L4.5058594,4.9785156 2.1738281,9.0214844 4.1132812,10.707031C4.0445153,11.128986 4,11.558619 4,12 4,12.441381 4.0445153,12.871014 4.1132812,13.292969L2.1738281,14.978516 4.5058594,19.021484 6.9296875,18.185547C7.5961042,18.732596,8.3550224,19.166199,9.1757812,19.476562L9.6679688,22 14.332031,22 14.824219,19.476562C15.644978,19.166199,16.403896,18.732596,17.070312,18.185547L19.494141,19.021484 21.826172,14.978516 19.886719,13.292969C19.955485,12.871014 20,12.441381 20,12 20,11.558619 19.955485,11.128986 19.886719,10.707031L21.826172,9.0214844 19.494141,4.9785156 17.070312,5.8144531C16.403896,5.2674041,15.644978,4.8338012,14.824219,4.5234375L14.332031,2 9.6679688,2z M12,8C14.209,8 16,9.791 16,12 16,14.209 14.209,16 12,16 9.791,16 8,14.209 8,12 8,9.791 9.791,8 12,8z"
                  Fill="#686D83"/>
                </Viewbox>
            </Grid>
        </Border>

    </Grid>

</UserControl>
